\hypertarget{_drv___devices_8c}{}\section{biopot\+L\+I\+R\+I\+N\+S/src/\+Drv\+\_\+\+Devices.c File Reference}
\label{_drv___devices_8c}\index{biopot\+L\+I\+R\+I\+N\+S/src/\+Drv\+\_\+\+Devices.\+c@{biopot\+L\+I\+R\+I\+N\+S/src/\+Drv\+\_\+\+Devices.\+c}}
{\ttfamily \#include \char`\"{}Drv\+\_\+\+Devices.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Drv\+\_\+\+U\+A\+R\+T.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Drv\+\_\+\+A\+D\+S1299.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Definitions\+\_\+\+A\+D\+S1299.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Drv\+\_\+\+G\+P\+I\+O.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}board\+\_\+api.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}chip.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group___devices___library_ga8092c357f91843e6fa9db02735addc7d}{Drv\+\_\+\+Devices\+\_\+event\+Serial} ()
\begin{DoxyCompactList}\small\item\em Function for receiving new commands. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gafb56f6b90c50e36cd6e34665d85fb903}{Drv\+\_\+\+Devices\+\_\+get\+Commands} (uint8\+\_\+t token)
\begin{DoxyCompactList}\small\item\em Function for interpreting commands. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga8584f49a773b7e9add0e51bb0057fb54}{Drv\+\_\+\+Devices\+\_\+stop\+Running} ()
\begin{DoxyCompactList}\small\item\em Stop data acquisition. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga7f4ddcd86724d8aad896ff12e43146ca}{Drv\+\_\+\+Devices\+\_\+start\+Running} (int O\+U\+T\+\_\+\+T\+Y\+P\+E)
\begin{DoxyCompactList}\small\item\em Start data acquisition. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga43e0b770fd7ccd57b3f0d5ddf0eda4be}{Drv\+\_\+\+Devices\+\_\+start\+From\+Scratch} ()
\begin{DoxyCompactList}\small\item\em Start the system from scratch, send initial message and get the board ready to get commands. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga26ea493ed59bae1e6a0c0af4ece44f40}{Drv\+\_\+\+Devices\+\_\+send\+E\+O\+T} ()
\begin{DoxyCompactList}\small\item\em Send characters to shake hands with the controlling program. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga752ca1b164444c691ffe54ed89d848c8}{Drv\+\_\+\+Devices\+\_\+start\+Devices} ()
\begin{DoxyCompactList}\small\item\em Call init and start functions of the different peripherals of the u\+C. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga1b75ac5dd3eb55ef54cff5de501875a9}{Drv\+\_\+\+Devices\+\_\+load\+Channel\+Settings} (uint8\+\_\+t parameter)
\begin{DoxyCompactList}\small\item\em Retrieve parameters and execute channel settings. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_ga648ce331709a942df57efd5b8645db13}{Drv\+\_\+\+Devices\+\_\+get\+Channel\+Number} (uint8\+\_\+t n)
\begin{DoxyCompactList}\small\item\em Convert channel number from character to number. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gafd94e72e2e363f075a57a091e26424b2}{Drv\+\_\+\+Devices\+\_\+write\+Channel\+Settings\+\_\+maintain\+Running\+State} (uint8\+\_\+t channel)
\begin{DoxyCompactList}\small\item\em Stop acquisition, set the channels and re-\/start acquisition. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gaa48520ff061081dab8c49d26bf9404dd}{Drv\+\_\+\+Devices\+\_\+set\+Channels\+To\+Default\+Settings} ()
\begin{DoxyCompactList}\small\item\em Set all channels to the default settings. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gacf4dbff760e8426996f21c8a68d77cef}{Drv\+\_\+\+Devices\+\_\+change\+Channel\+State\+\_\+maintain\+Running\+State} (uint8\+\_\+t channel, uint8\+\_\+t start)
\begin{DoxyCompactList}\small\item\em Activate or De-\/activate channel maintaining running state. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga42ce5be2b197d04b4b0a9918a11ea457}{Drv\+\_\+\+Devices\+\_\+activate\+All\+Channels\+To\+Test\+Condition} (uint8\+\_\+t test\+Input\+Code, uint8\+\_\+t amplitude\+Code, uint8\+\_\+t freq\+Code)
\begin{DoxyCompactList}\small\item\em Set test inputs to all channels. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gad214f99a7d211af8779b46b244f99d99}{Drv\+\_\+\+Devices\+\_\+print\+Registers} ()
\begin{DoxyCompactList}\small\item\em Print the current state of all A\+D\+S1299 registers. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gad85a26f63a893c55cdbbe5c4c0d0e69e}{Drv\+\_\+\+Devices\+\_\+print\+Register\+Name} (uint8\+\_\+t reg\+Number)
\begin{DoxyCompactList}\small\item\em To get and send by U\+A\+R\+T the name of a specific A\+D\+S1299 register. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga1a1a6145a5269b2a7ebd45abdb53b660}{Drv\+\_\+\+Devices\+\_\+print\+Default\+Channel\+Settings} ()
\begin{DoxyCompactList}\small\item\em Print the current Default Channel Settings. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga87716766599b761bde56572ccaac7946}{Drv\+\_\+\+Devices\+\_\+change\+Channel\+Lead\+Off\+Detect\+\_\+maintain\+Running\+State} (uint8\+\_\+t channel)
\begin{DoxyCompactList}\small\item\em Change lead off detect settings and re-\/start device. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga91621cb0b85d8918aa835f198c827379}{Drv\+\_\+\+Devices\+\_\+load\+Lead\+Off\+Settings} (uint8\+\_\+t parameter)
\begin{DoxyCompactList}\small\item\em Retrieve parameters and execute channel settings. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga92e403bbfcda965385b78ce10bbea47a}{Drv\+\_\+\+Devices\+\_\+is\+Master} ()
\begin{DoxyCompactList}\small\item\em Determines if the board is Master or Slave and set a flag. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_gaeab801d2d0a8823545cfde29704edc96}{Drv\+\_\+\+Devices\+\_\+get\+Is\+Master} ()
\begin{DoxyCompactList}\small\item\em Return the state of the is\+Master flag. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga65091ea2e7c2a0500683edf1bbc844ad}{Drv\+\_\+\+Devices\+\_\+get\+Is\+Running} ()
\begin{DoxyCompactList}\small\item\em Return the state of the is\+\_\+running flag. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga828212dc5604557924cd8ea9e6252c6c}{Drv\+\_\+\+Devices\+\_\+send\+Channel\+Data} ()
\begin{DoxyCompactList}\small\item\em Send via U\+A\+R\+T the data acquired by the A\+D\+S. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga7a5e2ac941ca1d1f308f910539005d4b}{Drv\+\_\+\+Devices\+\_\+start\+As\+Slave} ()
\begin{DoxyCompactList}\small\item\em Start the system as Salve. Configure I/\+O pins. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gab5e09814056d617c521549e542639b7e}{Sys\+Tick\+\_\+\+Handler} (void)
\begin{DoxyCompactList}\small\item\em Handle interrupt from Sys\+Tick timer. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_gadde208bf0ea8bb35d8606d3859219a40}{delay\+Ms} (uint8\+\_\+t timer\+\_\+num, uint32\+\_\+t delay\+In\+Ms)
\begin{DoxyCompactList}\small\item\em Delay in milliseconds. \end{DoxyCompactList}\item 
void \hyperlink{group___devices___library_ga120f8cfcae7121ef62deee0473cf19ee}{delay\+Us} (uint8\+\_\+t timer\+\_\+num, uint32\+\_\+t delay\+In\+Us)
\begin{DoxyCompactList}\small\item\em Delay in microseconds. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{group___devices___library_ga95cbd6b99430748422cc048b4f29dc52}{is\+\_\+running} = F\+A\+L\+S\+E
\begin{DoxyCompactList}\small\item\em Flag to indicate if the A\+D\+S1299 is acquiring data or not. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga7ef266ee79910e6754e8783b550b4a0a}{get\+Channel\+Settings} = F\+A\+L\+S\+E
\begin{DoxyCompactList}\small\item\em Flag to indicate if channel settings commands are being received. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_ga2bc20b2f7f3efa988afcd5c19b3e2edf}{output\+Type} = \hyperlink{group___definitions___a_d_s1299_gacbec7850612c50434765aec136660982}{O\+U\+T\+P\+U\+T\+\_\+8\+\_\+\+C\+H\+A\+N}
\begin{DoxyCompactList}\small\item\em Mode of use\+: 8 or 16 channels. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_gac011c12f1d5ab04cb87b6edaec1d24ad}{plus\+Counter} = 0
\begin{DoxyCompactList}\small\item\em Counter to have control of the received commands. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_gae004df3f2b77e4d58eee171d2f76da40}{test\+Char} = 0
\begin{DoxyCompactList}\small\item\em Auxiliary byte. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_ga15bd8e07189205b21eb37b666895ee0e}{current\+Channel\+To\+Set} = 0
\begin{DoxyCompactList}\small\item\em Keep track of what channel we are loading settings for. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_gac064adc9b9dc0e68d43cf71bd52a0fdb}{channel\+Settings\+Counter} = 0
\begin{DoxyCompactList}\small\item\em Counter used to retrieve channel settings from serial port. \end{DoxyCompactList}\item 
bool \hyperlink{_drv___devices_8c_ae41b989c13af450f21b18dd5ad2c414a}{use\+Filters} = F\+A\+L\+S\+E
\begin{DoxyCompactList}\small\item\em Flag to indicate the use of filters. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___devices___library_gacaa36aec7dee3c3535b27afc88dcfc9c}{lead\+Off\+Settings\+Counter} = 0
\begin{DoxyCompactList}\small\item\em Counter used to retrieve lead off settings from serial port. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga774931d6c0caa199a9884bce2b300439}{get\+Lead\+Off\+Settings} = F\+A\+L\+S\+E
\begin{DoxyCompactList}\small\item\em Flag to indicate if lead off settings commands are being received. \end{DoxyCompactList}\item 
bool \hyperlink{group___devices___library_ga6ceb9b5a0a67762763468c0ac71705fe}{is\+Master} = F\+A\+L\+S\+E
\begin{DoxyCompactList}\small\item\em Flag to indicate if the board is Master (H\+I\+G\+H state) or Slave (L\+O\+W state) \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Variable Documentation}
\hypertarget{_drv___devices_8c_ae41b989c13af450f21b18dd5ad2c414a}{}\index{Drv\+\_\+\+Devices.\+c@{Drv\+\_\+\+Devices.\+c}!use\+Filters@{use\+Filters}}
\index{use\+Filters@{use\+Filters}!Drv\+\_\+\+Devices.\+c@{Drv\+\_\+\+Devices.\+c}}
\subsubsection[{use\+Filters}]{\setlength{\rightskip}{0pt plus 5cm}bool use\+Filters = F\+A\+L\+S\+E}\label{_drv___devices_8c_ae41b989c13af450f21b18dd5ad2c414a}


Flag to indicate the use of filters. 

